!function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return o(i?i:e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t,i){n(this,e),this.m_Position={x:t.x+i.width/2-5,y:t.y},this.m_Dimension={width:10,height:10},this.m_Rect={x:this.m_Position.x,y:this.m_Position.y,width:this.m_Dimension.width,height:this.m_Dimension.height},this.m_FillStyle="rgb(200,200,28)",this.m_CanApplyForce=!0,this.m_Alive=!0,this.m_XSpeed=4*Math.random()-2,this.m_YSpeed=5*Math.random()}return o(e,[{key:"setRect",value:function(){this.m_Name&&"PlayerBullet"==this.m_Name&&console.log("setRect",this.m_Position),this.m_Rect={x:this.m_Position.x,y:this.m_Position.y,width:this.m_Dimension.width,height:this.m_Dimension.height},this.m_Name&&"PlayerBullet"==this.m_Name&&console.log("setRect",this.m_Rect)}},{key:"update",value:function(){this.setRect()}}]),e}();i.Bullet=r},{}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.m_Canvas=document.getElementById("m_Canvas"),this.m_Context=this.m_Canvas.getContext("2d")}return o(e,[{key:"clearDraw",value:function(){this.m_Context.clearRect(0,0,1280,720)}},{key:"draw",value:function(e,t){this.m_Context.fillRect(e.x,e.y,t.width,t.height)}}]),e}();i.CanvasView=r},{}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e)}return o(e,[{key:"AABB",value:function(e,t){return e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height}},{key:"update",value:function(e,t){for(var i in t){var n=t[i];this.AABB(e.m_Rect,n.m_Rect)&&t.splice(i,1)}for(var o in t){var r=t[o];for(var s in r.m_Bullets){var a=r.m_Bullets[s];this.AABB(e.m_Rect,a.m_Rect)&&r.m_Bullets.splice(s,1)}}for(var l in t){var u=t[l];for(var h in e.m_Bullets){var m=e.m_Bullets[h];this.AABB(u.m_Rect,m.m_Rect)&&(t.splice(l,1),e.m_Bullets.splice(h,1))}}}}]),e}();i.CollisionManager=r},{}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.Controller=void 0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./KeyView.es6"),s=e("./Player.es6"),a=e("./EnemyManager.es6"),l=e("./CanvasView.es6"),u=e("./CollisionManager.es6"),h=function(){function e(){n(this,e),this.m_Player=new s.Player,this.m_KeyView=new r.KeyView(this),this.m_KeyView.m_KeyListener=this.update,this.m_KeyView.m_KeyListener.bind(this),this.m_CanvasView=new l.CanvasView,this.m_EnemyManager=new a.EnemyManager,this.m_CollisionManager=new u.CollisionManager,this.loop()}return o(e,[{key:"update",value:function(e,t){t.m_Player.move(e)}},{key:"loop",value:function(){var e=this.m_EnemyManager.m_Enemies;self=this,this.m_Player.update(),this.m_EnemyManager.update(this.m_Player),this.m_CanvasView.clearDraw(),this.m_CanvasView.draw(this.m_Player.m_Position,this.m_Player.m_Dimension);for(var t in e){var i=e[t];this.m_CanvasView.draw(i.m_Position,i.m_Dimension);for(var n in i.m_Bullets){var o=i.m_Bullets[n];o.m_Alive||i.m_Bullets.splice(n,1),this.m_CanvasView.draw(o.m_Position,o.m_Dimension)}}for(var r in this.m_Player.m_Bullets){var s=this.m_Player.m_Bullets[r];s.m_Alive||this.m_Player.m_Bullets.splice(r,1),this.m_CanvasView.draw(s.m_Position,s.m_Dimension)}this.m_CollisionManager.update(this.m_Player,e),window.requestAnimationFrame(function(){self.loop()})}}]),e}();i.Controller=h},{"./CanvasView.es6":2,"./CollisionManager.es6":3,"./EnemyManager.es6":7,"./KeyView.es6":8,"./Player.es6":9}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.Enemy=void 0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./EnemyBullet.es6"),s=function(){function e(t){n(this,e),this.m_Position=t,this.m_Dimension={width:40,height:40},this.m_Rect={x:this.m_Position.x,y:this.m_Position.y,width:this.m_Dimension.width,height:this.m_Dimension.height},this.m_Width=20,this.m_Height=40,this.m_Bullets=[],this.m_ApplyForceTimer=0,this.m_Spawn=!0,this.m_ShootTimer=0,this.m_TriggerTimer=0,this.m_BulletCounter=0,this.m_CanShoot=!0}return o(e,[{key:"add",value:function(e,t){var i={x:e.x+t.x,y:e.y+t.y};return i}},{key:"sub",value:function(e,t){var i={x:e.x-t.x,y:e.y-t.y};return i}},{key:"normalize",value:function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y),i={x:e.x/t,y:e.y/t};return i}},{key:"length",value:function e(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return e}},{key:"setRect",value:function(){this.m_Rect={x:this.m_Position.x,y:this.m_Position.y,width:this.m_Dimension.width,height:this.m_Dimension.height}}},{key:"shootBullet",value:function(){if(this.m_ShootTimer++,this.m_BulletCounter>=20&&(this.m_CanShoot=!1,this.m_ShootTimer=0,this.m_BulletCounter=0),100==this.m_ShootTimer&&(this.m_CanShoot=!0),this.m_CanShoot&&(this.m_TriggerTimer++,this.m_TriggerTimer>=10)){var e=new r.EnemyBullet({x:this.m_Position.x,y:this.m_Position.y+10},this.m_Dimension);this.m_Bullets.push(e),this.m_TriggerTimer=0,this.m_BulletCounter++}}},{key:"update",value:function(e){this.setRect(),this.shootBullet();for(var t in this.m_Bullets){var i=this.m_Bullets[t];i.update()}}}]),e}();i.Enemy=s},{"./EnemyBullet.es6":6}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0}),i.EnemyBullet=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},l=e("./Bullet.es6"),u=function(e){function t(e,i){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return r(t,e),s(t,[{key:"update",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setRect",this).call(this),this.m_Position.x+=this.m_XSpeed,this.m_Position.y+=this.m_YSpeed,this.m_Position.x-(this.m_Dimension.width+20)>640?this.m_Alive=!1:this.m_Position.x+(this.m_Dimension.width-20)<0?this.m_Alive=!1:this.m_Position.y-(this.m_Dimension.height+20)>720?this.m_Alive=!1:this.m_Position.y+(this.m_Dimension.height-20)<0&&(this.m_Alive=!1)}}]),t}(l.Bullet);i.EnemyBullet=u},{"./Bullet.es6":1}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.EnemyManager=void 0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./Enemy.es6"),s=function(){function e(t){n(this,e),this.m_EnemySpawnTimer=0,this.m_EnemySpawnTimerMax=100,this.m_Enemies=[]}return o(e,[{key:"update",value:function(e){this.m_EnemySpawnTimer++,100==this.m_EnemySpawnTimer&&this.spawnEnemy();for(var t in this.m_Enemies){var i=this.m_Enemies[t];i.update(e)}}},{key:"spawnEnemy",value:function(){var e=(10*Math.random(),{x:0,y:0});e.x=500*Math.random(),e.y=500*Math.random(),this.m_Enemies.push(new r.Enemy(e))}}]),e}();i.EnemyManager=s},{"./Enemy.es6":5}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){var i=this;n(this,e),window.onkeydown=function(e){i.onKeyDown(e,t)},this.m_KeyListener}return o(e,[{key:"onKeyDown",value:function(e,t){console.log(e.keyCode);var i={left:37===e.keyCode||65===e.keyCode,right:39===e.keyCode||68===e.keyCode,up:38===e.keyCode||87===e.keyCode,down:40===e.keyCode||83===e.keyCode,space:32===e.keyCode};this.m_KeyListener(i,t)}}]),e}();i.KeyView=r},{}],9:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.Player=void 0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("./PlayerBullet.es6"),s=function(){function e(t){n(this,e),this.m_Position={x:200,y:200},this.m_Dimension={width:20,height:20},this.m_Rect={x:this.m_Position.x,y:this.m_Position.y,width:this.m_Dimension.width,height:this.m_Dimension.height},this.m_MoveForce=.003,this.m_Speed=5,this.m_State="Idle",this.m_Bullets=[],this.m_FillStyle="rgb(200,200,28)",this.m_CanApplyForce=!0}return o(e,[{key:"length",value:function e(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return e}},{key:"update",value:function(){this.m_Rect={x:this.m_Position.x,y:this.m_Position.y,width:this.m_Dimension.width,height:this.m_Dimension.height};for(var e in this.m_Bullets){var t=this.m_Bullets[e];t.update()}}},{key:"move",value:function(e){e.right&&this.m_CanApplyForce&&(this.m_Position.x+=this.m_Speed),e.left&&this.m_CanApplyForce&&(this.m_Position.x-=this.m_Speed),e.up&&this.m_CanApplyForce&&(this.m_Position.y-=this.m_Speed),e.down&&this.m_CanApplyForce&&(this.m_Position.y+=this.m_Speed),e.space&&this.shootBullet()}},{key:"shootBullet",value:function(){this.m_Bullets.push(new r.PlayerBullet(this.m_Position,this.m_Dimension))}}]),e}();i.Player=s},{"./PlayerBullet.es6":10}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0}),i.PlayerBullet=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},l=e("./Bullet.es6"),u=function(e){function t(e,i){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{x:e.x+10,y:e.y},i));return r.m_YSpeed=3,r.m_Name="PlayerBullet",console.log("Playerbullet created"),r}return r(t,e),s(t,[{key:"update",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setRect",this).call(this,this.m_Name),this.m_Position.y-=this.m_YSpeed,this.m_Position.x+=this.m_XSpeed,this.m_Position.x-(this.m_Dimension.width+20)>640?this.m_Alive=!1:this.m_Position.x+(this.m_Dimension.width-20)<0?this.m_Alive=!1:this.m_Position.y-(this.m_Dimension.height+20)>720?this.m_Alive=!1:this.m_Position.y+(this.m_Dimension.height-20)<0&&(this.m_Alive=!1)}}]),t}(l.Bullet);i.PlayerBullet=u},{"./Bullet.es6":1}],11:[function(e,t,i){"use strict";var n=e("./Controller.es6");document.addEventListener("DOMContentLoaded",function(){new n.Controller})},{"./Controller.es6":4}]},{},[11]);
//# sourceMappingURL=script.js.map
